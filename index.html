<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Will you be my Valentine, Mahima?</title>
  <meta name="description" content="A simple, responsive Valentine page for Mahima with floating 3D-like hearts & rose petals, evasive No button and persuasive lines near the Yes button." />

  <style>
    :root{
      --bg1: #ffd7e6;
      --bg2: #fff0f6;
      --accent: #ff2d95;
      --muted: #6b6b6b;
      --card-bg: rgba(255,255,255,0.85);
    }

    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;}
    body{
      background: linear-gradient(180deg,var(--bg1),var(--bg2));
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Canvas (hearts + petals) under everything */
    canvas#scene {
      position: fixed;
      inset: 0;
      z-index: 0;
      display:block;
      width:100%;
      height:100%;
      pointer-events:none;
    }

    /* Simple responsive layout */
    .stage {
      position: relative;
      z-index: 5;
      width: min(980px, 96%);
      max-width: 980px;
      margin: 24px;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 28px;
      background: var(--card-bg);
      border-radius: 16px;
      box-shadow: 0 14px 50px rgba(0,0,0,0.12);
      border: 1px solid rgba(255,255,255,0.6);
      backdrop-filter: blur(6px);
    }

    /* Desktop: horizontal layout, Mobile: stack */
    .content {
      width:100%;
      display:flex;
      gap: 18px;
      align-items:center;
      justify-content:space-between;
    }
    .left {
      flex:1 1 58%;
      padding: 8px 12px;
    }
    .right {
      flex: 0 0 320px;
      min-width: 240px;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:12px;
      padding: 8px 12px;
    }

    /* Title */
    h1 {
      margin:0 0 8px 0;
      font-size: clamp(24px, 4vw, 40px);
      color: var(--accent);
      line-height:1.02;
      text-align:left;
    }
    p.lead {
      margin:0 0 12px 0;
      color:#333;
      font-size: 1.05rem;
    }

    /* Yes button and the small bubble for persuasive lines */
    .yes-area {
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:10px;
    }
    .yes-btn {
      background: linear-gradient(135deg,var(--accent),#ff7ab6);
      color:white;
      border:none;
      padding: 14px 30px;
      border-radius: 999px;
      font-weight:700;
      font-size: 1rem;
      box-shadow: 0 10px 30px rgba(255,45,149,0.18);
      cursor:pointer;
      z-index:6;
    }
    .yes-btn:focus{ outline: 3px solid rgba(255,45,149,0.14); outline-offset:4px }

    /* persuasive bubble that appears near YES */
    .bubble {
      min-height: 46px;
      min-width: 180px;
      max-width: 320px;
      padding: 10px 14px;
      border-radius: 12px;
      background: rgba(255,255,255,0.98);
      box-shadow: 0 8px 24px rgba(0,0,0,0.08);
      display:flex;
      align-items:center;
      justify-content:center;
      color:#222;
      font-weight:600;
      text-align:center;
      font-size: 0.98rem;
      transition: transform .22s ease, opacity .22s ease;
      opacity:0;
      transform: translateY(8px);
      z-index:6;
    }
    .bubble.show { opacity:1; transform: translateY(0); }

    /* No button anchored near bottom of the view */
    .no-wrap {
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: 18px;
      z-index: 6;
      pointer-events:auto;
    }
    .no-btn {
      background: white;
      color: #333;
      padding: 12px 24px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,0.06);
      cursor:pointer;
      font-weight:700;
      box-shadow: 0 8px 24px rgba(0,0,0,0.08);
      transition: transform .16s ease;
      touch-action: manipulation;
    }

    /* subtle instructions for mobile */
    .hint {
      font-size: 0.92rem;
      color: var(--muted);
      margin-top: 6px;
      text-align:center;
    }

    /* responsiveness: stack on small screens */
    @media (max-width:720px){
      .content{ flex-direction: column; align-items:center; gap:10px; }
      .right{ order:-1; width:100%; max-width:420px; }
      .no-wrap { bottom: 14px; }
      .left h1 { text-align:center; }
      p.lead { text-align:center; }
    }

    /* small decorative footer */
    .credit {
      font-size: 0.82rem;
      color: var(--muted);
      margin-top: 8px;
    }
  </style>
</head>
<body>
  <canvas id="scene" aria-hidden="true"></canvas>

  <main class="stage" role="main" aria-labelledby="title">
    <div class="content">
      <section class="left">
        <h1 id="title">Mahima â€” will you be my Valentine?</h1>
        <p class="lead">A simple question, from me to you. Click "YES" if your heart says so. The "NO" button can be a little shyâ€¦</p>
        <div class="credit">Tip: move your mouse near the petals and watch them respond âœ¨</div>
      </section>

      <aside class="right" aria-label="Answer section">
        <div class="yes-area">
          <button id="yesBtn" class="yes-btn" aria-label="Yes">YES, of course! ðŸ’•</button>
          <div id="bubble" class="bubble" role="status" aria-live="polite"></div>
          <div class="hint">(the messages appear here)</div>
        </div>
      </aside>
    </div>
  </main>

  <div class="no-wrap" id="noWrap">
    <button id="noBtn" class="no-btn" aria-label="No">No</button>
  </div>

  <script>
    /********************************************************************
     * Responsive simple Valentine page
     * - Canvas renders floating hearts & rose petals with depth (3D feel)
     * - Petals react to pointer velocity & direction
     * - No button sits at bottom and runs away when pointer approaches
     * - When pointer nears No button, persuasive magical lines appear
     *   near the Yes button (one by one). Text ONLY appears near Yes
     * - Mobile-friendly: touch support (touchmove)
     ********************************************************************/

    // ---- Configuration ----
    const config = {
      heartsCountDesktop: 18,
      heartsCountMobile: 8,
      petalsCountDesktop: 48,
      petalsCountMobile: 22,
      petalSizeRange: [8, 28],
      petalDepthRange: [0.6, 1.6], // for 3D feel: scale & opacity
      mouseInfluenceRadius: 160,
      noProximityThreshold: 120, // px
      persuasiveShowTime: 2800 // ms
    };

    // persuasive lines (magical convincing lines)
    const persuasive = [
      "If you say yes, I'll give you the best smile every morning âœ¨",
      "I'll be your umbrella on rainy days and your favorite joke on gloomy ones.",
      "I promise to share my fries and my hoodie â€” every time.",
      "I'll write you silly poems and remember tiny things about you.",
      "Say yes and I'll make a playlist just for us â€” midnight dances included.",
      "I'll steal you a star and put it in your pocket (metaphorically).",
      "I'll be your +1 for every awkward family function â€” and bring snacks.",
      "I'll cheer for your smallest wins and hug away the biggest worries.",
      "I already like you a lot â€” let's make it official for Valentine's Day.",
      "One 'yes' and I will be the luckiest person alive."
    ];

    // ---- Utilities ----
    const isTouchDevice = () => ('ontouchstart' in window) || navigator.maxTouchPoints > 0;

    // ---- Canvas & Particles ----
    const canvas = document.getElementById('scene');
    const ctx = canvas.getContext('2d', { alpha: true });
    let DPR = Math.max(1, window.devicePixelRatio || 1);
    function resizeCanvas() {
      DPR = Math.max(1, window.devicePixelRatio || 1);
      canvas.width = Math.floor(innerWidth * DPR);
      canvas.height = Math.floor(innerHeight * DPR);
      canvas.style.width = innerWidth + 'px';
      canvas.style.height = innerHeight + 'px';
      ctx.setTransform(DPR, 0, 0, DPR, 0, 0);
    }
    window.addEventListener('resize', resizeCanvas, { passive: true });
    resizeCanvas();

    // Particle arrays
    const hearts = [];
    const petals = [];

    // Pointer tracking (for velocity)
    let pointer = { x: innerWidth / 2, y: innerHeight / 2, lastX: null, lastY: null, vx: 0, vy: 0, time: performance.now() };
    function updatePointer(x,y,t){
      if(pointer.lastX === null){
        pointer.lastX = x; pointer.lastY = y; pointer.time = t;
        pointer.vx = 0; pointer.vy = 0;
        pointer.x = x; pointer.y = y;
        return;
      }
      const dt = Math.max(16, t - pointer.time);
      pointer.vx = (x - pointer.lastX) / dt * 16; // normalized to ~16ms
      pointer.vy = (y - pointer.lastY) / dt * 16;
      pointer.lastX = x; pointer.lastY = y; pointer.time = t;
      pointer.x = x; pointer.y = y;
    }

    // Create heart particle (simple scaled hearts using path)
    function spawnHeart(x=null,y=null){
      const w = innerWidth, h = innerHeight;
      const size = 14 + Math.random()*36;
      const px = x === null ? Math.random() * w : x;
      const py = y === null ? h + 20 + Math.random()*60 : y;
      const vx = (Math.random()-0.5) * 0.6;
      const vy = - (6 + Math.random()*10) / 20;
      const hue = 320 + Math.random()*40;
      hearts.push({
        x: px, y: py, vx, vy, size, hue, alpha: 0.7 + Math.random()*0.3, rot: (Math.random()-0.5)*0.6, life: 0
      });
    }

    // Create petal particle with depth to give 3D impression
    function spawnPetal(x=null,y=null){
      const w = innerWidth, h = innerHeight;
      const size = config.petalSizeRange[0] + Math.random()*(config.petalSizeRange[1]-config.petalSizeRange[0]);
      const depth = config.petalDepthRange[0] + Math.random()*(config.petalDepthRange[1]-config.petalDepthRange[0]); // larger->closer
      const px = x === null ? Math.random() * w : x;
      const py = y === null ? -20 - Math.random()*h*0.6 : y;
      const vx = (Math.random()-0.5) * 0.6 * (1/depth);
      const vy = (1.2 + Math.random()*1.2) * (1/depth) + 0.2;
      const rotation = Math.random()*Math.PI*2;
      const rotateSpeed = (Math.random()-0.5)*0.03;
      const colorShift = 330 + Math.random()*30; // pinkish
      petals.push({
        x: px, y: py, vx, vy, size, depth, rotation, rotateSpeed, colorShift, alpha: 0.6 + Math.random()*0.4
      });
    }

    // Initial spawn counts depending on device
    function populate() {
      const heartsCount = isTouchDevice() ? config.heartsCountMobile : config.heartsCountDesktop;
      const petalsCount = isTouchDevice() ? config.petalsCountMobile : config.petalsCountDesktop;
      hearts.length = 0; petals.length = 0;
      for(let i=0;i<heartsCount;i++) spawnHeart();
      for(let i=0;i<petalsCount;i++) spawnPetal();
    }
    populate();

    // Draw helpers
    function drawHeart(p){
      ctx.save();
      ctx.translate(p.x, p.y);
      ctx.rotate(p.rot);
      const s = p.size * 0.9;
      ctx.beginPath();
      ctx.moveTo(0, -s/2);
      ctx.bezierCurveTo(s/2, -s/2 - s/3, s*1.2, -s/6, 0, s*0.9);
      ctx.bezierCurveTo(-s*1.2, -s/6, -s/2, -s/2 - s/3, 0, -s/2);
      ctx.closePath();
      ctx.fillStyle = `hsla(${p.hue},85%,60%,${p.alpha})`;
      ctx.shadowColor = `rgba(0,0,0,0.08)`;
      ctx.shadowBlur = Math.min(12, p.size * 0.6);
      ctx.fill();
      ctx.restore();
    }

    function drawPetal(p){
      ctx.save();
      ctx.translate(p.x, p.y);
      ctx.rotate(p.rotation);
      const s = p.size * (p.depth * 0.9);
      const g = ctx.createLinearGradient(-s*0.4, -s*0.4, s*0.6, s*0.6);
      g.addColorStop(0, `hsla(${p.colorShift - 8},85%,78%,${p.alpha})`);
      g.addColorStop(0.6, `hsla(${p.colorShift},80%,68%,${p.alpha})`);
      g.addColorStop(1, `hsla(${p.colorShift + 8},85%,58%,${p.alpha})`);
      ctx.beginPath();
      ctx.moveTo(0, -s*0.35);
      ctx.quadraticCurveTo(s*0.6, -s*0.6, s*0.7, 0);
      ctx.quadraticCurveTo(s*0.4, s*0.9, 0, s*0.7);
      ctx.quadraticCurveTo(-s*0.4, s*0.9, -s*0.7, 0);
      ctx.quadraticCurveTo(-s*0.6, -s*0.6, 0, -s*0.35);
      ctx.closePath();
      ctx.fillStyle = g;
      ctx.shadowColor = `rgba(0,0,0,0.06)`;
      ctx.shadowBlur = Math.min(12, s*0.6);
      ctx.fill();
      ctx.restore();
    }

    // Animation loop: physics + drawing
    let lastFrame = performance.now();
    function loop(now){
      const dt = Math.min(40, now - lastFrame);
      lastFrame = now;

      // clear
      ctx.clearRect(0,0,innerWidth,innerHeight);

      // occasionally spawn new hearts/petals
      if(Math.random() < 0.06) spawnHeart();
      if(petals.length < (isTouchDevice()?config.petalsCountMobile:config.petalsCountDesktop) && Math.random() < 0.18) spawnPetal();

      // update and draw petals (behind)
      for(let i=petals.length-1;i>=0;i--){
        const p = petals[i];
        p.vy += 0.002 * dt * (1/p.depth);
        p.vx *= 0.999;
        p.vy *= 0.999;
        const dx = p.x - pointer.x;
        const dy = p.y - pointer.y;
        const dist = Math.hypot(dx,dy);
        if(dist < config.mouseInfluenceRadius){
          const influence = (1 - (dist / config.mouseInfluenceRadius));
          p.vx += (pointer.vx * 0.08) * influence * (1 / p.depth);
          p.vy += (pointer.vy * 0.08) * influence * (1 / p.depth);
          p.vx += (dx/dist || 0) * 0.08 * influence;
          p.vy += (dy/dist || 0) * 0.08 * influence;
        }

        p.x += p.vx * dt * 0.6;
        p.y += p.vy * dt * 0.6;
        p.rotation += p.rotateSpeed * (1 + (1/p.depth));

        if(p.y > innerHeight + 80 || p.x < -80 || p.x > innerWidth + 80){
          if(Math.random() < 0.6) spawnPetal(null, -40 - Math.random()*120);
          petals.splice(i,1);
        } else {
          drawPetal(p);
        }
      }

      // hearts (floating)
      for(let i=hearts.length-1;i>=0;i--){
        const h = hearts[i];
        h.vy -= 0.00012 * dt;
        h.vx *= 0.9995;
        h.vy *= 0.999;
        const dx = h.x - pointer.x;
        const dy = h.y - pointer.y;
        const dist = Math.hypot(dx,dy);
        if(dist < config.mouseInfluenceRadius * 0.9){
          const influence = (1 - (dist / (config.mouseInfluenceRadius*0.9)));
          h.vx += (pointer.vx * 0.02) * influence;
          h.vy += (pointer.vy * 0.02) * influence;
        }
        h.x += h.vx * dt * 0.8;
        h.y += h.vy * dt * 0.8;
        h.rot += 0.001 * (Math.random() > 0.5 ? 1 : -1) * dt;
        if(h.y < -80 || h.x < -100 || h.x > innerWidth + 100) {
          if(Math.random() < 0.6) spawnHeart();
          hearts.splice(i,1);
        } else {
          drawHeart(h);
        }
      }

      requestAnimationFrame(loop);
    }
    requestAnimationFrame(loop);

    // ---- Pointer / Touch handlers (throttled) ----
    let pointerThrottle = 0;
    function onPointerMove(x,y){
      const now = performance.now();
      pointerThrottle = now;
      updatePointer(x,y,now);
    }

    window.addEventListener('mousemove', (e) => {
      onPointerMove(e.clientX, e.clientY);
      checkNoProximity(e.clientX, e.clientY);
    }, { passive: true });

    window.addEventListener('touchstart', (e) => {
      const t = e.touches[0];
      onPointerMove(t.clientX, t.clientY);
      checkNoProximity(t.clientX, t.clientY);
    }, { passive: true });
    window.addEventListener('touchmove', (e) => {
      const t = e.touches[0];
      onPointerMove(t.clientX, t.clientY);
      checkNoProximity(t.clientX, t.clientY);
    }, { passive: true });

    // ---- No button behavior & persuasive lines ----
    const noWrap = document.getElementById('noWrap');
    const noBtn = document.getElementById('noBtn');
    const yesBtn = document.getElementById('yesBtn');
    const bubble = document.getElementById('bubble');

    function placeNoAt(x,y){
      noWrap.style.left = x + 'px';
      noWrap.style.bottom = y + 'px';
      noWrap.style.transition = 'left 260ms cubic-bezier(.2,.9,.2,1), bottom 260ms cubic-bezier(.2,.9,.2,1)';
      clearTimeout(placeNoAt._t);
      placeNoAt._t = setTimeout(()=>{ noWrap.style.transition = ''; }, 360);
    }

    function moveNoRandomAway(fromX, fromY){
      const margin = 18;
      const minX = margin;
      const maxX = innerWidth - margin;
      let attempt = 0, rx;
      do {
        rx = Math.floor(minX + Math.random() * (maxX - minX));
        attempt++;
      } while (Math.abs(rx - fromX) < innerWidth * 0.18 && attempt < 8);
      const bottom = 12 + Math.random() * 48;
      noWrap.style.transform = 'none';
      noWrap.style.position = 'fixed';
      noWrap.style.left = Math.min(Math.max(rx, 12), innerWidth - 12 - noWrap.offsetWidth) + 'px';
      noWrap.style.bottom = bottom + 'px';
      noWrap.style.transition = 'left 320ms cubic-bezier(.22,.9,.22,1), bottom 320ms cubic-bezier(.22,.9,.22,1)';
      setTimeout(()=> { noWrap.style.transition = ''; }, 420);
    }

    let persuasiveIndex = 0;
    let persuasiveTimeout = null;
    let lastProximityTime = 0;
    function showPersuasiveLine(){
      bubble.classList.add('show');
      bubble.textContent = persuasive[persuasiveIndex % persuasive.length];
      persuasiveIndex++;
      if(persuasiveTimeout) clearTimeout(persuasiveTimeout);
      persuasiveTimeout = setTimeout(()=> {
        bubble.classList.remove('show');
      }, config.persuasiveShowTime);
    }

    function checkNoProximity(px, py){
      const nbRect = noWrap.getBoundingClientRect();
      const nx = nbRect.left + nbRect.width/2;
      const ny = nbRect.top + nbRect.height/2;
      const dist = Math.hypot(px - nx, py - ny);
      if(dist < config.noProximityThreshold){
        const now = performance.now();
        if(now - lastProximityTime > 320){
          lastProximityTime = now;
          showPersuasiveLine();
          moveNoRandomAway(px, py);
        }
      }
    }

    noBtn.addEventListener('click', (ev) => {
      ev.preventDefault();
      const x = ev.clientX || (innerWidth/2);
      const y = ev.clientY || (innerHeight - 40);
      showPersuasiveLine();
      moveNoRandomAway(x,y);
    });

    noBtn.addEventListener('keydown', (ev) => {
      if(ev.key === 'Enter' || ev.key === ' '){
        ev.preventDefault();
        showPersuasiveLine();
        moveNoRandomAway(innerWidth/2, innerHeight - 40);
      }
    });

    function initNoPlacement(){
      noWrap.style.position = 'fixed';
      noWrap.style.left = Math.max(12, (innerWidth/2 - noWrap.offsetWidth/2)) + 'px';
      noWrap.style.bottom = '18px';
      noWrap.style.transform = 'none';
    }
    initNoPlacement();
    window.addEventListener('resize', ()=> {
      initNoPlacement();
    }, { passive:true });

    yesBtn.addEventListener('click', ()=> {
      bubble.classList.add('show');
      bubble.textContent = "Yay! Can't wait for Valentine's Day with you ðŸ’–";
      burstConfettiAt(yesBtn.getBoundingClientRect());
      if(persuasiveTimeout) clearTimeout(persuasiveTimeout);
      persuasiveTimeout = setTimeout(()=> bubble.classList.remove('show'), 6000);
    });
    yesBtn.addEventListener('keydown', (e)=> {
      if(e.key === 'Enter' || e.key === ' '){
        e.preventDefault();
        yesBtn.click();
      }
    });

    function burstConfettiAt(rect){
      const cx = rect.left + rect.width/2;
      const cy = rect.top + rect.height/2;
      const colors = ['#ff2d95','#ff7ab6','#ffd1e6','#ffc3a0','#ffb7de','#fff2f8'];
      for(let i=0;i<80;i++){ 
        const el = document.createElement('div');
        const size = 6 + Math.random()*10;
        el.style.position = 'fixed';
        el.style.left = (cx + (Math.random()*40 - 20)) + 'px';
        el.style.top = (cy + (Math.random()*20 - 10)) + 'px';
        el.style.width = size + 'px';
        el.style.height = size + 'px';
        el.style.background = colors[Math.floor(Math.random()*colors.length)];
        el.style.borderRadius = Math.random() > 0.6 ? '50%' : '2px';
        el.style.zIndex = 9999;
        el.style.pointerEvents = 'none';
        document.body.appendChild(el);
        const dx = (Math.random()*800 - 400);
        const dy = (innerHeight + 200) * (0.5 + Math.random()*0.8);
        const rot = Math.random()*720;
        const dur = 1000 + Math.random()*1200;
        el.animate([
          { transform: 'translate(0,0) rotate(0deg)', opacity: 1 },
          { transform: `translate(${dx}px, ${dy}px) rotate(${rot}deg)`, opacity: 0 }
        ], { duration: dur, easing: 'cubic-bezier(.2,.8,.3,1)' });
        setTimeout(()=> el.remove(), dur + 40);
      }
    }

    window.addEventListener('load', ()=>{
      updatePointer(innerWidth/2, innerHeight/2, performance.now());
      bubble.textContent = '';
      for(let i=0;i<6;i++) spawnPetal(Math.random()*innerWidth, -20 - Math.random()*80);
    });

  </script>
</body>
</html>