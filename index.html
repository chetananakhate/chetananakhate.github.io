<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Will you be my Valentine, Mahima?</title>
  <meta name="description" content="Minimal Valentine page for Mahima with floating hearts & rose petals." />
  <style>
    :root{ --bg1:#fff5f8; --bg2:#ffeef7; --accent:#ff2d95; --muted:#6b6b6b }
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:#222}
    body{background:linear-gradient(180deg,var(--bg1),var(--bg2));display:flex;align-items:center;justify-content:center;overflow:hidden}
    canvas#scene{position:fixed;inset:0;z-index:0;pointer-events:none}
    .wrap{position:relative;z-index:6;width:min(780px,96%);max-width:780px;padding:28px;border-radius:16px;display:flex;flex-direction:column;align-items:center;gap:20px;background:rgba(255,255,255,0.85);box-shadow:0 12px 40px rgba(0,0,0,0.08);backdrop-filter:blur(6px)}
    h1{margin:0;font-size:clamp(22px,4.6vw,38px);color:var(--accent);text-align:center}
    .buttons{display:flex;gap:18px;align-items:center;justify-content:center}
    button{border:0;padding:12px 26px;border-radius:999px;font-weight:700;cursor:pointer}
    #yes{background:linear-gradient(135deg,var(--accent),#ff7ab6);color:white;box-shadow:0 10px 30px rgba(255,45,149,0.14)}
    #no{background:#fff;color:#333;border:1px solid rgba(0,0,0,0.06);box-shadow:0 8px 20px rgba(0,0,0,0.06)}
    .bubble{position:relative;min-height:42px;min-width:220px;max-width:320px;padding:10px 14px;border-radius:12px;background:rgba(255,255,255,0.98);box-shadow:0 8px 20px rgba(0,0,0,0.06);font-weight:600;text-align:center;opacity:0;transform:translateY(6px);transition:opacity .22s,transform .22s}
    .bubble.show{opacity:1;transform:translateY(0)}
    .credit{font-size:0.88rem;color:var(--muted)}
    .no-wrap{position:fixed;left:50%;transform:translateX(-50%);bottom:18px;z-index:6}
    @media(max-width:720px){.wrap{padding:20px}.buttons{flex-direction:row;gap:12px}}
  </style>
</head>
<body>
  <canvas id="scene" aria-hidden="true"></canvas>
  <main class="wrap" role="main" aria-labelledby="q">
    <h1 id="q">Mahima â€” will you be my Valentine?</h1>
    <div class="buttons" aria-hidden="false">
      <div style="display:flex;flex-direction:column;align-items:center;gap:10px">
        <button id="yes" aria-label="Yes">YES ðŸ’•</button>
        <div id="bubble" class="bubble" aria-live="polite"></div>
      </div>
      <div style="width:12px"></div>
      <div style="display:flex;align-items:center">
        <div class="spacer" style="width:12px"></div>
      </div>
    </div>
    <div class="credit">(Move your mouse or touch to make petals flutter)</div>
  </main>

  <div class="no-wrap" id="noWrap"><button id="no" aria-label="No">No</button></div>

  <script>
    // --- Config tweaks per request ---
    const config = {
      heartsDesktop: 80, petalsDesktop: 120,
      heartsMobile: 40, petalsMobile: 70,
      petalSpeedBase: 0.12,
      petalMouseInfluence: 0.045,
      petalRadiusInfluence: 140,
      orbitDuration: 2800,
      orbitRadius: 90
    };

    const isTouch = ('ontouchstart' in window) || navigator.maxTouchPoints>0;

    const canvas = document.getElementById('scene');
    const ctx = canvas.getContext('2d');
    let DPR = Math.max(1, devicePixelRatio||1);
    function resize(){DPR = Math.max(1, devicePixelRatio||1); canvas.width = Math.floor(innerWidth*DPR); canvas.height = Math.floor(innerHeight*DPR); canvas.style.width=innerWidth+'px'; canvas.style.height=innerHeight+'px'; ctx.setTransform(DPR,0,0,DPR,0,0);} window.addEventListener('resize', resize); resize();

    // particles
    const hearts = [], petals = [];
    function spawnHeart(x=null,y=null){ const size = 10+Math.random()*34; hearts.push({x: x===null?Math.random()*innerWidth:x, y: y===null?innerHeight+20:y, vx:(Math.random()-0.5)*0.4, vy: - (3+Math.random()*6)/20, size, hue:320+Math.random()*40, alpha:0.6+Math.random()*0.4, rot:(Math.random()-0.5)*0.5}); }
    function spawnPetal(x=null,y=null){ const size = 6+Math.random()*22; const depth = 0.8 + Math.random()*1.2; petals.push({x:x===null?Math.random()*innerWidth:x, y:y===null?-10-Math.random()*120:y, vx:(Math.random()-0.5)*0.2*(1/depth), vy:(0.4+Math.random()*0.6)*(1/depth)*config.petalSpeedBase, size, depth, rot:Math.random()*Math.PI*2, rSpeed:(Math.random()-0.5)*0.005, hue:330+Math.random()*24, alpha:0.6 + Math.random()*0.35}); }

    function populate(){ hearts.length=0; petals.length=0; const h = isTouch?config.heartsMobile:config.heartsDesktop; const p = isTouch?config.petalsMobile:config.petalsDesktop; for(let i=0;i<h;i++) spawnHeart(); for(let i=0;i<p;i++) spawnPetal(); } populate();

    // pointer
    const pointer = {x:innerWidth/2,y:innerHeight/2,lastX:null,lastY:null,vx:0,vy:0,t:performance.now()};
    function updPointer(x,y,t){ if(pointer.lastX===null){pointer.lastX=x;pointer.lastY=y;pointer.t=t;pointer.x=x;pointer.y=y;return;} const dt=Math.max(16,t-pointer.t); pointer.vx=(x-pointer.lastX)/dt*16; pointer.vy=(y-pointer.lastY)/dt*16; pointer.lastX=x;pointer.lastY=y;pointer.t=t; pointer.x=x; pointer.y=y; }

    // drawing
    function drawHeart(h){ ctx.save(); ctx.translate(h.x,h.y); ctx.rotate(h.rot); const s=h.size*0.9; ctx.beginPath(); ctx.moveTo(0,-s/2); ctx.bezierCurveTo(s/2,-s/2-s/3,s*1.2,-s/6,0,s*0.9); ctx.bezierCurveTo(-s*1.2,-s/6,-s/2,-s/2-s/3,0,-s/2); ctx.closePath(); ctx.fillStyle = `hsla(${h.hue},85%,60%,${h.alpha})`; ctx.fill(); ctx.restore(); }
    function drawPetal(p){ ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot); const s = p.size * (p.depth*0.9); const g=ctx.createLinearGradient(-s*0.4,-s*0.4,s*0.6,s*0.6); g.addColorStop(0,`hsla(${p.hue-6},85%,78%,${p.alpha})`); g.addColorStop(0.6,`hsla(${p.hue},80%,68%,${p.alpha})`); g.addColorStop(1,`hsla(${p.hue+6},85%,58%,${p.alpha})`); ctx.beginPath(); ctx.moveTo(0,-s*0.35); ctx.quadraticCurveTo(s*0.6,-s*0.6,s*0.7,0); ctx.quadraticCurveTo(s*0.4,s*0.9,0,s*0.7); ctx.quadraticCurveTo(-s*0.4,s*0.9,-s*0.7,0); ctx.quadraticCurveTo(-s*0.6,-s*0.6,0,-s*0.35); ctx.closePath(); ctx.fillStyle=g; ctx.fill(); ctx.restore(); }

    // animate
    let last=performance.now(); function frame(now){ const dt = Math.min(40, now-last); last=now; ctx.clearRect(0,0,innerWidth,innerHeight);
      // spawn extras softly
      if(Math.random()<0.05) spawnHeart(); if(petals.length < (isTouch?config.petalsMobile:config.petalsDesktop) && Math.random()<0.08) spawnPetal();
      // petals
      for(let i=petals.length-1;i>=0;i--){ const p=petals[i];
        p.vy += 0.00006*dt; p.vx *= 0.999; p.vy *= 0.999;
        const dx=p.x-pointer.x, dy=p.y-pointer.y, d=Math.hypot(dx,dy);
        if(d < config.petalRadiusInfluence){ const f=(1 - d/config.petalRadiusInfluence) * config.petalMouseInfluence; p.vx += (pointer.vx * 0.03) * f * (1/p.depth); p.vy += (pointer.vy * 0.03) * f * (1/p.depth); }
        p.x += p.vx*dt*0.6; p.y += p.vy*dt*0.6; p.rot += p.rSpeed*(1 + (1/p.depth));
        if(p.y > innerHeight + 80 || p.x < -80 || p.x > innerWidth+80){ if(Math.random()<0.6) spawnPetal(null,-40 - Math.random()*100); petals.splice(i,1);} else drawPetal(p);
      }
      // hearts
      for(let i=hearts.length-1;i>=0;i--){ const h=hearts[i]; h.vy -= 0.00006*dt; h.vx*=0.9995; h.vy*=0.999; const dx=h.x-pointer.x, dy=h.y-pointer.y, d=Math.hypot(dx,dy); if(d < config.petalRadiusInfluence*0.8){ const f=(1 - d/(config.petalRadiusInfluence*0.8)); h.vx += (pointer.vx * 0.01) * f; h.vy += (pointer.vy * 0.01) * f; }
        h.x += h.vx*dt*0.8; h.y += h.vy*dt*0.8; h.rot += 0.001*(Math.random()>0.5?1:-1)*dt;
        if(h.y<-80||h.x<-100||h.x>innerWidth+100){ if(Math.random()<0.6) spawnHeart(); hearts.splice(i,1);} else drawHeart(h);
      }
      requestAnimationFrame(frame);
    }
    requestAnimationFrame(frame);

    // pointer handlers
    window.addEventListener('mousemove',(e)=>{ updPointer(e.clientX,e.clientY,performance.now()); checkProximity(e.clientX,e.clientY); },{passive:true});
    window.addEventListener('touchmove',(e)=>{ const t=e.touches[0]; if(!t) return; updPointer(t.clientX,t.clientY,performance.now()); checkProximity(t.clientX,t.clientY); },{passive:true});

    // --- No button orbiting around YES ---
    const noWrap = document.getElementById('noWrap'); const noBtn = document.getElementById('no'); const yes = document.getElementById('yes'); const bubble = document.getElementById('bubble');
    // remove hint bubble default text - user asked to remove
    bubble.textContent = '';

    function getYesCenter(){ const r = yes.getBoundingClientRect(); return {x: r.left + r.width/2, y: r.top + r.height/2}; }

    let orbiting = false; let orbitStart = 0; let orbitAng = 0; let orbitReq = null;
    function startOrbit(duration){ if(orbiting) return; orbiting = true; orbitStart = performance.now(); const center = getYesCenter(); const radius = Math.max(60, Math.min(160, config.orbitRadius)); orbitAng = Math.random()*Math.PI*2;
      function step(t){ const elapsed = t - orbitStart; const progress = elapsed / duration; orbitAng += 0.06 + (0.04*progress); const cx = center.x + Math.cos(orbitAng)*radius - (noWrap.offsetWidth/2); const cy = center.y + Math.sin(orbitAng)*radius; noWrap.style.position='fixed'; noWrap.style.left = Math.min(Math.max(6, cx), innerWidth - noWrap.offsetWidth - 6) + 'px'; noWrap.style.bottom = Math.max(8, innerHeight - cy - noWrap.offsetHeight/2) + 'px'; if(elapsed < duration && orbiting){ orbitReq = requestAnimationFrame(step); } else { stopOrbit(); } }
      orbitReq = requestAnimationFrame(step);
    }
    function stopOrbit(){ orbiting=false; if(orbitReq) cancelAnimationFrame(orbitReq); orbitReq=null; // return to centered bottom
      noWrap.style.position='fixed'; noWrap.style.left = Math.max(12,(innerWidth/2 - noWrap.offsetWidth/2)) + 'px'; noWrap.style.bottom = '18px'; }

    // show persuasive lines near YES only
    let pIndex = 0; let pTimeout = null;
    function showPersuasive(){ bubble.classList.add('show'); bubble.textContent = persuasive[pIndex % persuasive.length]; pIndex++; if(pTimeout) clearTimeout(pTimeout); pTimeout = setTimeout(()=> { bubble.classList.remove('show'); }, 2800); }

    // when pointer gets near no button, start orbit and persuasive lines
    function checkProximity(px,py){ const nb = noWrap.getBoundingClientRect(); const nx = nb.left + nb.width/2; const ny = nb.top + nb.height/2; const d = Math.hypot(px - nx, py - ny); if(d < 120){ // trigger orbit
        startOrbit(config.orbitDuration);
        showPersuasive();
    }
    }

    // intercept clicks on NO to orbit away
    noBtn.addEventListener('click',(e)=>{ e.preventDefault(); startOrbit(config.orbitDuration); showPersuasive(); });
    noBtn.addEventListener('keydown',(e)=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); startOrbit(config.orbitDuration); showPersuasive(); }});

    // Yes action
    yes.addEventListener('click',()=>{ bubble.classList.add('show'); bubble.textContent = "Yes! Can't wait ðŸ’–"; burstConfetti(getYesCenter()); setTimeout(()=>bubble.classList.remove('show'),4200); });

    // simple confetti function
    function burstConfetti(center){ const colors=['#ff2d95','#ff7ab6','#ffd1e6','#ffc3a0','#fff2f8']; for(let i=0;i<60;i++){ const el=document.createElement('div'); const s=6+Math.random()*10; el.style.position='fixed'; el.style.left=(center.x + (Math.random()*30-15))+'px'; el.style.top=(center.y + (Math.random()*20-8))+'px'; el.style.width=s+'px'; el.style.height=s+'px'; el.style.background=colors[Math.floor(Math.random()*colors.length)]; el.style.borderRadius=Math.random()>0.6?'50%':'2px'; el.style.zIndex=9999; el.style.pointerEvents='none'; document.body.appendChild(el); const dx=(Math.random()*800-400); const dy=(innerHeight+200)*(0.6+Math.random()*0.8); const rot=Math.random()*720; const dur=900+Math.random()*900; el.animate([{transform:'translate(0,0) rotate(0deg)',opacity:1},{transform:`translate(${dx}px, ${dy}px) rotate(${rot}deg)`,opacity:0}],{duration:dur,easing:'cubic-bezier(.2,.8,.3,1)'}); setTimeout(()=>el.remove(),dur+40); }
    }

    // persuasive lines list (kept here)
    const persuasive = ["If you say yes, I'll give you the best smile every morning âœ¨","I'll be your umbrella on rainy days and your favorite joke on gloomy ones.","I promise to share my fries and my hoodie â€” every time.","I'll write you silly poems and remember tiny things about you.","Say yes and I'll make a playlist just for us â€” midnight dances included.","I'll steal you a star and put it in your pocket (metaphorically).","I'll be your +1 for every awkward family function â€” and bring snacks.","I'll cheer for your smallest wins and hug away the biggest worries.","I already like you a lot â€” let's make it official for Valentine's Day.","One 'yes' and I will be the luckiest person alive."];

    // initial placement of no button
    function initNo(){ noWrap.style.position='fixed'; noWrap.style.left = Math.max(12,(innerWidth/2 - noWrap.offsetWidth/2))+'px'; noWrap.style.bottom='18px'; }
    initNo(); window.addEventListener('resize',initNo);

  </script>
</body>
</html>